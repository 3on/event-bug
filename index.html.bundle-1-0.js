montageDefine("7ba039d","ui/repetition.reel/repetition",{dependencies:["../../core/core","../component","../../core/template","../../core/range-controller","../../core/promise","../../core/browser","collections/map","collections/set","../../core/deprecate","../../core/logger","frb/observers"],factory:function(e,t){var n=e("../../core/core").Montage,r=e("../component").Component;e("../../core/template").Template;var i=e("../../core/range-controller").RangeController,a=e("../../core/promise").Promise,o=e("../../core/browser").browser,s=e("collections/map"),l=e("collections/set"),u=e("../../core/deprecate").deprecationWarning,c=e("../../core/logger").logger("repetition").color.magenta(),h=e("frb/observers"),d=h.observeProperty,p=h.observeKey,f=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},object:{value:null},selected:{value:null},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},_noTransition:{value:null},_templateDocumentPart:{value:null},isDirty:{value:!1},constructor:{value:function f(){this.super(),c.isDebug&&c.debug("Iteration:%s create iteration %O",Object.hash(this),this),this.repetition=null,this.controller=null,this.object=null,this.defineBinding("selected",{"<->":"object.defined() ? repetition.contentController.selection.has(object) : selected"}),this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("selected",this),this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.object=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex?(c.isDebug&&c.debug("Iteration:%s retracting from index %s and injecting at %s",Object.hash(this),this._drawnIndex,e),this.retractFromDocument()):c.isDebug&&c.debug("Iteration:%s injecting at index %s",Object.hash(this),e);var t=this,n=this.repetition,r=n.element,i=n._boundaries,a=r.ownerDocument.createTextNode(""),o=i[e];if(i.splice(e,0,a),r.insertBefore(a,o),r.insertBefore(this._fragment,o),n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this),!this._elementsWillBeAddedToMap){var s=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),s--,s||t.forEachElement(function(e){n._iterationForElement.set(e,t)})};if(this._childComponents.length>0)for(var u=0;this._childComponents.length>u;u++){var h=this._childComponents[u];h.addEventListener("firstDraw",l,!1),h.needsDraw=!0,h._completedFirstDraw===!0&&console.error("Repetiton:%s child component %O has already drawn.",Object.hash(this),h)}else this.forEachElement(function(e){n._iterationForElement.set(e,t)});this._elementsWillBeAddedToMap=!0}}},_elementsWillBeAddedToMap:{value:!1},retractFromDocument:{value:function(){c.isDebug&&c.debug("Iteration:%s retractFromDocument drawnIndex: %s",Object.hash(this),this._drawnIndex);var e=this._drawnIndex,t=this.repetition,n=t.element,r=t._boundaries[e],i=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,o=r.nextSibling;o!=i;){var s=o.nextSibling;n.removeChild(o),a.appendChild(o),o=s}n.removeChild(r),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){e?this._childComponents.forEach(this.repetition.addChildComponent,this.repetition):this._childComponents&&this._childComponents.forEach(this.repetition.removeChildComponent,this.repetition)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,r=this._drawnIndex;if(null!=r)for(var i=n._boundaries[r];i!==n._boundaries[r+1];i=i.nextSibling)1===i.nodeType&&e.call(t,i)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},isComponentTreeLoaded:{value:function(){return null!==this._fragment}},cachedFirstElement:{value:null}});t.Repetition=r.specialize({initWithContent:{value:function(e){return this.object=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new i).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selection:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},objectAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},constructor:{value:function(){this.super(),this.contentController=null,this.organizedContent=[],this.defineBinding("organizedContent.rangeContent()",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<->":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=s(),this._iterationForElement=s(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=l(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){var t=this._innerTemplate;this._innerTemplate=null,t&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_buildIterationTemplate:{value:function(){var e,t,r,i;return e=this.innerTemplate.clone(),t=e.getSerialization(),r=t.getSerializationObject(),i=n.getInfoForObject(this).label,this._iterationLabel=i+":iteration",r[this._iterationLabel]={},e.setObjects(r),this.innerTemplate.hasParameters()&&this._expandIterationTemplateParameters(e),window._montage_le_flag&&(e.refresher=this,this._leTagIterationTemplate(e)),e}},_rebuildIterationTemplate:{value:function(){var e,t=this._iterationTemplate,n=this.iterations;this._purgeFreeIterations();for(var r,i=0;r=n[i];i++)r.isDirty=!0;this._innerTemplate=null,e=this._buildIterationTemplate(),t.replaceContentsWithTemplate(e)}},refreshTemplate:{value:function(){this._rebuildIterationTemplate()}},_setupIterationTemplate:{value:function(){var e=this;this._iterationTemplate=this._buildIterationTemplate();for(var t,n=e.childComponents,r=n.length-1;t=n[r--];)t.detachFromParentComponent(),t.needsDraw=!1,t.cleanupDeletedComponentTree(!0);e.handleOrganizedContentRangeChange(e.organizedContent,[],0),e.organizedContent.addRangeChangeListener(e,"organizedContent"),e._canDrawInitialContent=!0,e.needsDraw=!0}},_leTagIterationTemplate:{value:function(e){var t=e.document.body;if(t.children.length>0){var n=this.ownerComponent._montage_metadata.moduleId,r=this._montage_metadata.label;this._leTagStarArgument(n,r,t)}}},_teardownIterationTemplate:{value:function(){this.organizedContent.removeRangeChangeListener(this,"organizedContent"),this.handleOrganizedContentRangeChange([],this.organizedContent,0),this._purgeFreeIterations(),this._iterationTemplate=null,this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_purgeFreeIterations:{value:function(){for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var r=t._childComponents[n];this.removeChildComponent(r),r.cleanupDeletedComponentTree(!0)}this._freeIterations.clear()}},_expandIterationTemplateParameters:{value:function(e){for(var t,n,r,i,a,o,s,l,u,c=this;e.hasParameters();){c=c.ownerComponent,t=c._ownerDocumentPart.template,i=c._ownerDocumentPart.objects,o=e.expandParameters(c),r=e.getSerialization().getExternalObjectLabels(),a=e.getInstances(),l=o.labels,n=o.labelsCollisions;for(var h,d=0;h=l[d];d++)s=n&&h in n?n[h]:h,r.indexOf(s)>=0?a[s]=i[h]:(u=t.getObjectMetadata(h),u.owner||(u.owner=i.owner),e.setObjectMetadata(s,u.require,u.label,u.owner))}}},_iterationLabel:{value:null},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n,r,i=e.element.ownerDocument;return e.currentIteration=t,n=e._iterationTemplate.getInstances(),n=Object.create(n),n[e._iterationLabel]=t,r=e._iterationTemplate.instantiateWithInstances(n,i).then(function(n){n.parentDocumentPart=e._ownerDocumentPart,t._templateDocumentPart=n,n.loadComponentTree().then(function(){c.isDebug&&c.debug("Iteration:%s component tree loaded.",Object.hash(t)),t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}).done(),e.currentIteration=null}),r.done(),r.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?("contentAtCurrentIteration"===e?u("contentAtCurrentIteration",":iteration.object"):"objectAtCurrentIteration"===e&&u("objectAtCurrentIteration",":iteration.object"),p(this._contentForIteration,this.currentIteration,t,n)):"currentIteration"===e?(u("currentIteration",":iteration"),t(this.currentIteration)):d(this,e,t,n)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){c.isDebug&&c.debug("Repetition:%s content changed +%s@%s %O -%s %O ",Object.hash(this),e?e.length:0,n,e,t?t.length:0,t);var r=this.iterations,i=this._contentForIteration;this._iterationTemplate.isDirty&&this._iterationTemplate.refresh();var a=Math.min(e.length,t.length),o=t.length-a,s=e.length-a;if(c.isDebug&&c.debug("Repetition:%s +%s -%s iterations",Object.hash(this),s,o),a>0)for(var l=0;a>l;l++,n++)r[n].object=e[l],i.set(r[n],e[l]);if(o>0){var u=r.splice(n,o);u.forEach(function(e){e.recycle()});for(var h,l=0;h=u[l];l++)h.isDirty||this._freeIterations.push(h)}if(s>0){if(c.isDebug)var d=[];for(;s>this._freeIterations.length;)this._freeIterations.push(this._createIteration()),c.isDebug&&d.push(this._freeIterations[this._freeIterations.length-1]);for(var p=Array(s),l=a,f=0;e.length>l;l++,f++){var m=this._freeIterations.pop();c.isDebug&&(d.has(m)||c.debug("Repetition:%s reusing %s",Object.hash(this),Object.hash(m)));var v=e[l];m.object=v,i.set(m,v),p[f]=m}r.swap(n,0,p)}(o>0||s>0)&&this._updateIndexes(n),this.needsDraw=!0}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.isComponentTreeLoaded()&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.isComponentTreeLoaded()&&e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}},_drawInitialContent:{value:function(){for(var e=this.element,t=e.childNodes.length,n=0;t>n;n++)e.removeChild(e.firstChild);var r=e.ownerDocument.createTextNode("");e.appendChild(r),this._boundaries.push(r)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){o.android&&o.android.androidBrowser?window.Touch?this.element.addEventListener("touchstart",this,!0):this.element.addEventListener("mousedown",this,!0):(this.element.addEventListener("touchstart",this,!0),this.element.addEventListener("mousedown",this,!0))}},_disableSelectionTracking:{value:function(){o.android&&o.android.androidBrowser?window.Touch?this.element.removeEventListener("touchstart",this,!0):this.element.removeEventListener("mousedown",this,!0):(this.element.removeEventListener("touchstart",this,!0),this.element.removeEventListener("mousedown",this,!0))}},_observeSelectionPointer:{value:function(e){this._selectionPointer=e,this.eventManager.claimPointer(e,this);var t=this.element.ownerDocument;t.addEventListener("touchend",this,!1),t.addEventListener("touchcancel",this,!1),t.addEventListener("mouseup",this,!1)}},_ignoreSelectionPointer:{value:function(){this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)&&this.eventManager.forfeitPointer(this._selectionPointer,this),this._selectionPointer=null,this.activeIterations.clear();var e=this.element.ownerDocument;e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mouseup",this,!1)}},captureMousedown:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer("mouse");var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},captureTouchstart:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer(e.changedTouches[0].identifier);var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},handleTouchend:{value:function(e){for(var t=0;e.changedTouches.length>t&&!this._endSelectionOnTarget(e.changedTouches[t].identifier,e.target);t++);}},handleTouchcancel:{value:function(){this._ignoreSelectionPointer()}},handleMouseup:{value:function(e){this._endSelectionOnTarget("mouse",e.target)}},_endSelectionOnTarget:{value:function(e,t){if(e===this._selectionPointer){if(this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)){var n=this._findIterationContainingElement(t);n&&(n.active=!1,n.selected||(n.selected=!0))}return this._ignoreSelectionPointer(),!0}}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:f,serializable:!1}})}}),montageDefine("5c7c3da","ui/autocomplete/autocomplete.reel/autocomplete",{dependencies:["montage/ui/component","ui/text-input","montage/core/logger","ui/autocomplete/results-list.reel/results-list","ui/popup/popup.reel","montage/composer/press-composer","montage/core/range-controller"],factory:function(e,t){var n=(e("montage/ui/component").Component,e("ui/text-input").TextInput),r=e("montage/core/logger").logger("autocomplete"),i=e("ui/autocomplete/results-list.reel/results-list").ResultsList,a=e("ui/popup/popup.reel").Popup,o=e("montage/composer/press-composer").PressComposer,s=e("montage/core/range-controller").RangeController,l=38,u=40,c=13,h=function(e){var t=0,n=0,r=0,i=0;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop,r+=e.offsetHeight,i+=e.offsetWidth;while(e=e.offsetParent);return{top:n,left:t,height:r,width:i}};t.Autocomplete=n.specialize({constructor:{value:function(){this.super(),this.delay=500,this.minLength=2,this.classList.add("matte-InputText")}},hasTemplate:{value:!0},delegate:{value:null},textPropertyPath:{value:null},separator:{value:",",distinct:!0},_delay:{value:null},delay:{get:function(){return this._delay},set:function(e){e!==this._delay&&("string"==typeof e&&(e=parseInt(e,10)),this._delay=e)}},minLength:{value:null},_tokens:{value:null},tokens:{get:function(){return this._tokens},set:function(e){this._tokens=e,this._valueSyncedWithInputField=!1,this.needsDraw=!0},modify:function(e){this._tokens=e}},value:{get:function(){return this._value},set:function(e,t){this._value=e?e.trim():"";var n=this._value;if(n){var i=n.split(this.separator).map(function(e){return e.trim()});this.activeTokenIndex=this._findActiveTokenIndex(this.tokens,i),this._tokens=n.split(this.separator).map(function(e){return e.trim()})}else this.activeTokenIndex=0,this._tokens=[];if(t){if(this._valueSyncedWithInputField=!0,this.showPopup=!1,this._tokens.length&&this._tokens.length>0){var a=this._tokens[this.activeTokenIndex];if(a=a?a.trim():"",a.length>=this.minLength){var o=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){o.delayTimer=null,r.isDebug&&r.debug("SEARCH for ",a),o.performSearch(a)},this.delay)}}}else this.showPopup=!1,this._valueSyncedWithInputField=!1,this.needsDraw=!0}},overlayWidth:{value:null,enumerable:!1},delayTimer:{value:null,enumerable:!1},_loadingStatus:{value:!1,enumerable:!1},loadingStatus:{enumerable:!1,get:function(){return this._loadingStatus},set:function(e){this._loadingStatus=e,"loading"===this._loadingStatus&&(this.showPopup=!1),this.needsDraw=!0}},activeTokenIndex:{value:null},_findActiveTokenIndex:{enumerable:!1,value:function(e,t){if(null==e||null==t)return 0;var n=0,r=t.length;for(n=0;r>n;n++)if(e.length>n){if(e[n]===t[n])continue;break}return n}},_activeIndexes:{value:null,enumerable:!1},activeItemIndex:{enumerable:!1,get:function(){return this._activeIndexes&&this._activeIndexes.length>0?this._activeIndexes[0]:null},set:function(e){this._activeIndexes=null==e?[]:[e]}},_suggestedValue:{value:null},suggestedValue:{enumerable:!1,get:function(){return this._suggestedValue},set:function(e){if(this._suggestedValue=e,e){var t,n=this.tokens||[];t="string"==typeof e?e:this.textPropertyPath?e[this.textPropertyPath]:"",n[this.activeTokenIndex]=t,this.tokens=n,this.showPopup=!1}}},popup:{enumerable:!1,value:null},_showPopup:{value:null},showPopup:{enumerable:!1,get:function(){return this._showPopup},set:function(e){e!=this._showPopup&&(this._showPopup=e,this.needsDraw=!0)}},_suggestions:{value:null},suggestions:{enumerable:!1,get:function(){return this._suggestions},set:function(e){r.isDebug&&r.debug("got suggestions: ",e),this.loadingStatus="complete",this._suggestions=e,this.showPopup=e&&e.length>0}},resultsController:{enumerable:!1,value:null},resultsList:{enumerable:!1,value:null},performSearch:{enumerable:!1,value:function(e){this.delegate&&(this.resultsController.selectedIndexes=[],this.activeItemIndex=0,this.loadingStatus="loading",this.callDelegateMethod("ShouldGetSuggestions",this,e))}},_addEventListeners:{enumerable:!1,value:function(){this.element.addEventListener("keyup",this),this.element.addEventListener("input",this)}},_removeEventListeners:{enumerable:!1,value:function(){this.element.removeEventListener("keyup",this),this.element.removeEventListener("input",this)}},_getPopup:{enumerable:!1,value:function(){var e=this.popup;return e||(e=new a,e.content=this.resultsList,e.anchor=this.element,e.delegate=this,e.focusOnShow=!1,this.popup=e),this.popup}},willPositionPopup:{value:function(e){var t=e.anchorElement,n=h(t);return{left:n.left,top:n.top+30}}},enterDocument:{value:function(e){e&&(this._addEventListeners(),this.element.classList.add("matte-Autocomplete"),this.resultsController=new s,this.resultsController.selection=[],this.defineBinding("resultsController.content",{"<-":"suggestions"}),this.defineBinding("suggestedValue",{"<-":"resultsController.selection[0]"}),this.resultsList=new i,this.defineBinding("resultsList.contentController",{"<-":"resultsController"}),this.defineBinding("resultsList.activeIndexes",{"<-":"_activeIndexes"}),this.defineBinding("resultsList.textPropertyPath",{"<-":"textPropertyPath"}),this._getPopup())}},prepareForActivationEvents:{value:function(){var e=new o;this.addComposer(e)}},draw:{value:function(){this.super(),this._valueSyncedWithInputField||(this.tokens&&(this.value=this.tokens.join(this.separator)),this.value&&this.value.charAt(this.value.length-1)!=this.separator&&(this.value+=this.separator),this.element.value=this.value,this._valueSyncedWithInputField=!0);var e=this.showPopup;""===this.value&&(e=!1),e?(this.popup.show(),this.activeItemIndex=0):this.popup&&this.popup.displayed&&this.popup.hide();var t="loading"===this.loadingStatus;this.element.classList[t?"add":"remove"]("matte-Autocomplete--loading")}},handleKeyup:{enumerable:!1,value:function(e){var t=e.keyCode,n=this._getPopup();switch(t){case u:if(n.displayed){var r=this.suggestions||[];r.length>0&&this.activeItemIndex<r.length-1?this.activeItemIndex++:this.activeItemIndex=0}else n.show(),this.activeItemIndex=0;break;case l:n.displayed===!0&&(this.activeItemIndex>0?this.activeItemIndex--:this.activeItemIndex=0);break;case c:n.displayed===!0?(this.resultsController.selection=[this.suggestions[this.activeItemIndex]],e.preventDefault()):this.suggestedValue=this.tokens[this.tokens.length-1]}this.element.focus()}}})}}),montageDefine("7ba039d","composer/press-composer",{dependencies:["../core/core","./composer","../core/event/mutable-event"],factory:function(e,t){var n=e("../core/core").Montage,r=e("./composer").Composer,i=e("../core/event/mutable-event").MutableEvent,a=t.PressComposer=r.specialize({load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this,!0):this._element.removeEventListener("mousedown",this,!0)}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){r.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)return!1;var t;"touchstart"===e.type?(t=e.changedTouches.length,1===t&&(this._observedPointer=e.changedTouches[0].identifier),document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)):"mousedown"===e.type&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1)),this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,r;if(null===this._observedPointer)return this._endInteraction(e),void 0;for(t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;n!==this._element&&n&&n.parentNode;)n=n.parentNode;if(r=n===this._element,t&&"click"===e.type)return e.preventDefault(),this._endInteraction(e),void 0;if("mouseup"===e.type){if(!t&&r)return this._dispatchPress(e),this._endInteraction(e),void 0;if(!t&&!r)return this._dispatchPressCancel(e),this._endInteraction(e),void 0;this._endInteraction(e)}}},_endInteraction:{value:function(){document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this),document.removeEventListener("click",this),document.removeEventListener("mouseup",this),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED}},_changedTouchisObserved:{value:function(e){if(null===this._observedPointer)return!1;for(var t=0,n=e.length;n>t;t++)if(e[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,r;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new o,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(r=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[r]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),o=function(){var e,t,r,a,o,s;for(e=i.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],r=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},o=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},s=t.length-1;s>=0;s--)n.defineProperty(e,t[s],a(t[s]));for(s=r.length-1;s>=0;s--)n.defineProperty(e,r[s],o(r[s]));return e}()}}),montageDefine("7ba039d","core/range-controller",{dependencies:["./core","collections/generic-collection"],factory:function(e,t){var n=e("./core").Montage,r=e("collections/generic-collection"),i=function(e,t){var n=e.clone();n.makeObservable(),n.rangeController=t,n.contentEquals=e&&e.contentEquals||Object.is,Object.defineProperty(n,"clone",{value:function(){return n.slice()}});var r=n.splice;return Object.defineProperty(n,"splice",{configurable:!1,value:function(e,t){var n=this.rangeController.content;this.contentEquals=n&&n.contentEquals||Object.is,e=e>=0?e:this.length+e;var i=this.length,a=Math.min(t,i-e),o=[].slice.call(arguments,2);o.contentEquals=this.contentEquals;var s,l=o.filter(function(t,r){if(n&&!n.has(t))return!1;if(o.findLast(t)>r)return!1;var i=this.find(t);return 0>i||i>=e&&e+a>i},this),u=Math.max(l.length,0),c=u-a,h=Math.max(i+c,e+u);if(!this.rangeController.multiSelect&&h>1){var d=u?l[u-1]:this.one();s=[0,i,d]}else s=this.rangeController.avoidsEmptySelection&&0===h?n.has(this[0])?[1,this.length-1]:[0,this.length,n.one()]:[e,t].concat(l);return r.apply(this,s)}}),n};t.RangeController=n.specialize({constructor:{value:function(e){this.content=null,this._selection=new i([],this),this.sortPath=null,this.filterPath=null,this.visibleIndexes=null,this.reversed=!1,this.start=null,this.length=null,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_orderedContent",{"<-":"content.($filterPath.defined() ? filter{path($filterPath)} : ()).($sortPath.defined() ? sorted{path($sortPath)} : ()).($reversed ?? 0 ? reversed() : ())"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"_orderedContent.($visibleIndexes.defined() ?$visibleIndexes.filter{<$_orderedContent.length}.map{$_orderedContent[()]} : ()).($start.defined() && $length.defined() ?view($start, $length) : ())"}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[],e&&this.initWithContent(e)}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},visibleIndexes:{value:null},start:{value:null},length:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},_orderedContent:{value:null},organizedContent:{value:null},iterations:{value:null},_selection:{value:null},selection:{get:function(){return this._selection
},set:function(e){var t=[0,this._selection.length];e&&e.toArray&&(t=t.concat(e.toArray())),this._selection.splice.apply(this._selection,t)}},select:{value:function(e){!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){var r=this.content.swap.apply(this.content,arguments);if(n)for(var e=2;n.length>e;e++)this.handleAdd(n[e]);return r}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:r.prototype.addEach},deleteEach:{value:r.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t){if(this.selection.length>0){var n=this.content&&this.content.contentEquals||Object.is;t.deleteEach(e,n),this.selection&&this.selection.deleteEach(t)}}},handleSelectionRangeChange:{value:function(e,t){if(this.selection)if(this.content){for(var n=[],r=0;e.length>r;r++)this.content.has(e[r])||n.push(e[r]);if(this._selection.deleteEach(n),!this.multiSelect&&this._selection.length>1){var i=this._selection.pop();this._selection.clear(),this._selection.add(i)}this.avoidsEmptySelection&&0==this._selection.length&&this._selection.add(t[0])}else this._selection.clear()}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent&&this.selection){var n=t.clone(1);n.deleteEach(e),this.selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this.selection&&this.selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&this.selection&&(!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e))}},handleMultiSelectChange:{value:function(){if(this.selection){var e=this.selection.length;if(!this.multiSelect&&e>1){var t=this._selection.pop();this._selection.clear(),this._selection.add(t)}}}}},{blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("5c7c3da","ui/popup/popup.reel/popup",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Popup=n.specialize({hasTemplate:{value:!0},anchorElement:{value:null},_anchor:{value:null},anchor:{get:function(){return this._anchor},set:function(e){e&&(this._anchor=e,this.anchorElement=e.nodeName?e:e.element)}},delegate:{value:null},contentEl:{value:null},containerEl:{value:null},_slot:{value:null},slot:{get:function(){return this._slot},set:function(e){this._slot=e,this.content&&(this._slot.content=this.content)}},_content:{value:null},content:{get:function(){return this._content},set:function(e){this._content!==e&&this.slot&&(this.slot.content=e),this._content=e,this._content.popup=this,this.needsDraw=!0}},_modal:{value:!1},modal:{get:function(){return this._modal},set:function(e){e=!!e,this._modal!==e&&(this._modal=e,this.needsDraw=!0)}},_position:{value:null},position:{get:function(){return this._position},set:function(e){this._position=e}},autoHide:{value:0},_displayed:{value:!1},displayed:{get:function(){return this._displayed},set:function(e){this._displayed!==e&&(this.needsDraw=!0),this._displayed=e}},focusOnShow:{value:!0},enterDocument:{value:function(e){e&&(this.type=this.type||"custom")}},_popupSlot:{value:null},_modalDialogMask:{value:null},_getElementPosition:{value:function(e){var t=0,n=0,r=0,i=0;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop,r+=e.offsetHeight,i+=e.offsetWidth;while(e=e.offsetParent);return{top:n,left:t,height:r,width:i}}},_getCSSValue:{value:function(e){return null!=e?("number"==typeof e&&(e+="px"),e):""}},_positionPopup:{value:function(){var e,t,n=this.delegate,r=this.anchorElement;if(this.type,null!==this.position)e=this.position;else{var i=this.contentEl||this.content.element,a=parseFloat(i.style.height||0)||i.offsetHeight||0,o=parseFloat(i.style.width||0)||i.offsetWidth||0,s=window.innerHeight,l=window.innerWidth;if(r){var u=this._getElementPosition(r),c=parseFloat(r.style.height||0)||r.offsetHeight||0,h=parseFloat(r.style.width||0)||r.offsetWidth||0;e={top:u.top+c,left:u.left+h/2-o/2},0>e.left&&(e.left=u.left,this._showHidePointer(!1))}else e={top:s/2-a/2,left:l/2-o/2}}t=n&&"function"==typeof n.willPositionPopup?n.willPositionPopup(this,e):e;var d=this._popupSlot;t&&(d.element.style.top=this._getCSSValue(t.top),d.element.style.left=this._getCSSValue(t.left),d.element.style.right=this._getCSSValue(t.right),d.element.style.bottom=this._getCSSValue(t.bottom))}},_createModalMask:{value:function(){var e=document.createElement("div");return e.classList.add("montage-Popup-modal-mask"),e.style.zIndex=6999,e.classList.add("montage-invisible"),document.body.appendChild(e),e}},_showHidePointer:{value:function(){}},_addEventListeners:{value:function(){window.Touch?this.element.ownerDocument.addEventListener("touchstart",this,!1):(this.element.ownerDocument.addEventListener("mousedown",this,!1),this.element.ownerDocument.addEventListener("keyup",this,!1)),window.addEventListener("resize",this)}},_removeEventListeners:{value:function(){window.Touch?this.element.ownerDocument.removeEventListener("touchstart",this,!1):(this.element.ownerDocument.removeEventListener("mousedown",this,!1),this.element.ownerDocument.removeEventListener("keyup",this,!1)),window.removeEventListener("resize",this)}},show:{value:function(){var e=this.type,t=this;this.application.getPopupSlot(e,this,function(e){t._popupSlot=e,t.displayed=!0,t._addEventListeners()})}},hide:{value:function(){var e=this.type,t=this;this.application.getPopupSlot(e,this,function(){t._removeEventListeners(),t.displayed=!1})}},_showModalMask:{value:function(){this._modalDialogMask=document.querySelector("Popup-modal-mask"),this._modalDialogMask=this._modalDialogMask||this._createModalMask(),this._modalDialogMask.classList.remove("montage-invisible")}},_hideModalMask:{value:function(){var e=this.application._getActivePopupSlots(),t=0;if(e&&e.length>0){var n,r=e.length;for(n=0;r>n;n++)e[n].content&&e[n].content.modal===!0&&e[n].content.displayed===!0&&t++}0>=t&&this._modalDialogMask.classList.add("montage-invisible")}},draw:{value:function(){if(this.displayed){if(this.modal===!0)this.element.classList.add("montage-Popup--modal");else if(this.element.classList.remove("montage-Popup--modal"),this.autoHide){var e=this;setTimeout(function(){e.hide()},this.autoHide)}this.element.classList.remove("montage-invisible"),this.content.element.style.display="block",this.content.element.classList.remove("montage-invisible"),this.content.element.setAttribute("tabindex","0")}else this.element.classList.contains("montage-invisible")||this.element.classList.add("montage-invisible"),this.content.element.classList.add("montage-invisible"),this._popupSlot&&(this._popupSlot.content=null)}},didDraw:{value:function(){this._displayed?(this.modal===!0&&this._showModalMask(),this._positionPopup(),this.focusOnShow===!0&&this.content.element.focus()):this.modal===!0&&this._hideModalMask();var e=document.createEvent("CustomEvent");e.initCustomEvent(this._displayed===!0?"show":"hide",!0,!0,this),this.dispatchEvent(e)}},getZIndex:{value:function(e){for(var t,n,r;e&&e!==document;){if(t=e.style.position,("absolute"===t||"relative"===t||"fixed"===t)&&(r=e.style["z-index"],n=parseInt(r,10),!isNaN(n)&&0!==n))return n;e=e.parentNode}return 0}},_handleTouchMouseup:{value:function(e){var t=this.getZIndex(e.target),n=this.getZIndex(this.element);this.displayed===!0&&n>t&&(this.modal===!0||(this.displayed=!1))}},_timeoutId:{value:null},handleResize:{value:function(){var e=this;this.displayed===!0&&(window.clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){e.needsDraw=!0},100))}},handleMousedown:{value:function(e){this._handleTouchMouseup(e)}},handleTouchstart:{value:function(e){this._handleTouchMouseup(e)}},handleKeyup:{value:function(e){this.displayed!==!0||this.modal||27!==e.keyCode||this.hide()}}})}}),montageDefine("7ba039d","ui/overlay.reel/overlay",{dependencies:["../../core/core","../component","../../composer/key-composer","../../composer/press-composer","../../core/event/event-manager"],factory:function(e,t){var n=(e("../../core/core").Montage,e("../component").Component),r=e("../../composer/key-composer").KeyComposer,i=e("../../composer/press-composer").PressComposer,a=e("../../core/event/event-manager").defaultEventManager,o="montage-Overlay";t.Overlay=n.specialize({_pressComposer:{value:null},_keyComposer:{value:null},_anchor:{value:null},anchor:{set:function(e){this._anchor=e,this.needsDraw=!0},get:function(){return this._anchor}},_position:{value:null},position:{set:function(e){this._position=e,this.needsDraw=!0},get:function(){return this._position}},_drawPosition:{value:null},_isShown:{value:!1},isShown:{get:function(){return this._isShown}},_isDisplayed:{value:!1},_resizeHandlerTimeout:{value:null},_previousActiveTarget:{value:null},delegate:{value:null},_dismissOnExternalInteraction:{value:!0},dismissOnExternalInteraction:{set:function(e){e!==this._dismissOnExternalInteraction&&(this._dismissOnExternalInteraction=e,e?this._pressComposer.addEventListener("pressStart",this,!1):this._pressComposer.removeEventListener("pressStart",this,!1))},get:function(){return this._dismissOnExternalInteraction}},constructor:{value:function(){this.super(),this._pressComposer=new i,this._pressComposer.lazyLoad=!0}},enterDocument:{value:function(e){var t,n;e&&(t=this.element.ownerDocument.body,t.appendChild(this.element),this.attachToParentComponent(),n=this.element.ownerDocument.defaultView,n.addEventListener("resize",this),this.addComposerForElement(this._pressComposer,this.element.ownerDocument),this._dismissOnExternalInteraction&&this._pressComposer.addEventListener("pressStart",this,!1),this._keyComposer=new r,this._keyComposer.component=this,this._keyComposer.keys="escape",this._keyComposer.identifier="escape",this.addComposer(this._keyComposer),this._keyComposer.element=window)}},show:{value:function(){if(!this._isShown){if(this.isModal&&(this._previousActiveTarget=a.activeTarget,a.activeTarget=this,a.activeTarget!==this))return console.warn("Overlay "+this.identifier+" can't become the active target because ",a.activeTarget," didn't surrender it."),void 0;this.attachToParentComponent(),this.classList.add(o+"--visible"),this._pressComposer.load(),this._keyComposer.load(),this._isShown=!0,this.needsDraw=!0,this._keyComposer.addEventListener("keyPress",this,!1)}}},hide:{value:function(){this._isShown&&(this.classList.remove(o+"--visible"),this._pressComposer.unload(),this._keyComposer.unload(),this._isShown=!1,this.needsDraw=!0,this.isModal&&(a.activeTarget=this._previousActiveTarget),this._keyComposer.removeEventListener("keyPress",this,!1))}},isModal:{value:!0},surrendersActiveTarget:{value:function(e){return this.isShown&&this.isModal?e.element?this.element.contains(e.element):!1:!0}},handleResize:{value:function(){this.isShown&&(this.needsDraw=!0)}},handlePressStart:{value:function(e){this.element.contains(e.targetElement)||this.dismissOverlay(e)}},handleKeyPress:{value:function(e){"escape"===e.identifier&&this.dismissOverlay(e)}},dismissOverlay:{value:function(e){var t=!1;return this._isShown&&(t=this.callDelegateMethod("shouldDismissOverlay",this,e.targetElement,e.type),(void 0===t||t)&&(this.hide(),this._dispatchDismissEvent())),t}},willDraw:{value:function(){this._isDisplayed&&this._isShown&&this._calculatePosition(),this._isShown||this.callDelegateMethod("didHideOverlay",this)}},draw:{value:function(){this._isShown?this._isDisplayed?(this._reposition(),this.element.style.visibility="visible"):(this.element.style.visibility="hidden",this._isDisplayed=!0,this.callDelegateMethod("didShowOverlay",this),this.needsDraw=!0):this._isDisplayed=!1}},didDraw:{value:function(){this._isShown||this.detachFromParentComponent()}},_reposition:{value:function(){var e=this._drawPosition;this.element.style.top=e.top+"px",this.element.style.left=e.left+"px"}},_getElementPosition:{value:function(e){var t=0,n=0;do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{top:n,left:t}}},_calculatePosition:{value:function(){var e,t;e=this.position?this.position:this.anchor?this._calculateAnchorPosition():this._calculateCenteredPosition(),t=this.callDelegateMethod("willPositionOverlay",this,e),t&&(e=t),this._drawPosition=e}},_calculateAnchorPosition:{value:function(){var e,t=this.anchor,n=this.element.offsetWidth,r=this._getElementPosition(t),i=t.offsetHeight||0,a=t.offsetWidth||0;return e={top:r.top+i,left:r.left+a/2-n/2},0>e.left&&(e.left=0),e}},_calculateCenteredPosition:{value:function(){var e=this.element.ownerDocument.defaultView,t=e.innerHeight,n=e.innerWidth,r=this.element.offsetHeight,i=this.element.offsetWidth;return{top:t/2-r/2,left:n/2-i/2}}},_dispatchDismissEvent:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("dismiss",!0,!0,null),this.dispatchEvent(e)}}})}}),montageDefine("ca12d77","ui/button.reel/button",{dependencies:["ui/native-control","montage/composer/press-composer","montage/collections/dict"],factory:function(e,t){var n=e("ui/native-control").NativeControl,r=e("montage/composer/press-composer").PressComposer,i=e("montage/collections/dict"),a=t.Button=n.specialize({_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=e===!0?!0:!1}},enabled:{dependencies:["disabled"],get:function(){return!this._disabled},set:function(e){this.disabled=!e}},converter:{value:null},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(e&&e.length>0&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=e,this._isInputElement&&(this._value=e),this.needsDraw=!0}},setLabelInitialValue:{value:function(e){void 0===this._label&&(this._label=e)}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},_pressComposer:{enumberable:!1,value:null},_active:{enumerable:!1,value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},constructor:{value:function(){this.super(),this._pressComposer=new r,this._pressComposer.longPressThreshold=this.holdThreshold,this.addComposer(this._pressComposer)}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){this.super(e,t,n),"hold"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(){this.active=!1,this._dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this._dispatchActionEvent())}},handleLongPress:{value:function(){this._pressComposer.cancelPress();var e=document.createEvent("CustomEvent");e.initCustomEvent("hold",!0,!0,null),this.dispatchEvent(e)}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},_isInputElement:{value:!1,enumerable:!1},enterDocument:{value:function(e){n.enterDocument&&n.enterDocument.apply(this,arguments),e&&(this._isInputElement="INPUT"===this.originalElement.tagName,this._isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this._label=this.originalElement.value)):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,this.setLabelInitialValue(this._labelNode.data),void 0===this._label&&(this._label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this._isInputElement?this._element.setAttribute("value",e):this._labelNode.data=e}},draw:{value:function(){this.super(),this._disabled?this._element.classList.add("disabled"):this._element.classList.remove("disabled"),this._active?this._element.classList.add("active"):this._element.classList.remove("active"),this._drawLabel(this.label)}},_detail:{value:null},detail:{get:function(){return null===this._detail&&(this._detail=new i),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}});a.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}}),montageDefine("5c7c3da","ui/text-input",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component,r=t.TextInput=n.specialize({_hasFocus:{enumerable:!1,value:!1},_value:{enumerable:!1,value:null},_valueSyncedWithInputField:{enumerable:!1,value:!1},value:{get:function(){return this._value},set:function(e,t){if(e!==this._value){if(this.converter){var n;try{n=this.converter.revert(e),this.error=null,this._value=n}catch(r){this._value=e,this.error=r}}else this._value=e;t?this._valueSyncedWithInputField=!0:(this._valueSyncedWithInputField=!1,this.needsDraw=!0)}}},_setValue:{value:function(){var e=this.element.value;Object.getPropertyDescriptor(this,"value").set.call(this,e,!0)}},converter:{value:null},_error:{value:null},error:{get:function(){return this._error},set:function(e){this._error=e,this.errorMessage=this._error?this._error.message:null,this.needsDraw=!0}},_errorMessage:{value:null},errorMessage:{get:function(){return this._errorMessage},set:function(e){this._errorMessage=e}},_updateOnInput:{value:!0},updateOnInput:{get:function(){return!!this._updateOnInput},set:function(e){this._updateOnInput=e}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},enterDocument:{value:function(e){if(e){var t=this.element;t.addEventListener("focus",this),t.addEventListener("input",this),t.addEventListener("change",this),t.addEventListener("blur",this)}}},_setElementValue:{value:function(e){this.element.value=null==e?"":e}},draw:{enumerable:!1,value:function(){this.super();var e=this.element;this._valueSyncedWithInputField||this._setElementValue(this.converter?this.converter.convert(this._value):this._value),this.error?(e.classList.add("montage--invalidText"),e.title=this.error.message||""):(e.classList.remove("matte--invalidText"),e.title="")}},didDraw:{enumerable:!1,value:function(){if(this._hasFocus&&null!=this._value){var e=(""+this._value).length;this.element.setSelectionRange(e,e)}this.needsDraw||(this._valueSyncedWithInputField=!0)}},handleInput:{enumerable:!1,value:function(){this.converter?this.converter.allowPartialConversion===!0&&this.updateOnInput===!0&&this._setValue():this._setValue()}},handleChange:{enumerable:!1,value:function(){this._setValue(),this._hasFocus=!1}},handleBlur:{enumerable:!1,value:function(){this._hasFocus=!1}},handleFocus:{enumerable:!1,value:function(){this._hasFocus=!0}}});r.addAttributes({accept:null,alt:null,autocomplete:null,autofocus:{dataType:"boolean"},checked:{dataType:"boolean"},dirname:null,disabled:{dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,height:null,list:null,maxlength:null,multiple:{dataType:"boolean"},name:null,pattern:null,placeholder:null,readonly:{dataType:"boolean"},required:{dataType:"boolean"},size:null,src:null,width:null})}}),montageDefine("7ba039d","composer/key-composer",{dependencies:["../core/core","./composer"],factory:function(e,t){var n=e("../core/core").Montage,r=e("./composer").Composer,i="keyPress",a="longKeyPress",o="keyRelease",s=t.KeyComposer=r.specialize({_isLoaded:{value:!1},_shouldDispatchEvent:{value:!1},shouldDispatchLongPress:{value:!1},_longPressTimeout:{value:null},_keyRegistered:{value:!1},_keys:{value:null},keys:{get:function(){return this._keys},set:function(e){this._keyRegistered?(u.defaultKeyManager.unregisterKey(this),this._keys=e,u.defaultKeyManager.registerKey(this)):this._keys=e}},load:{value:function(){this._isLoaded=!0,this._shouldDispatchEvent&&!this._keyRegistered&&(u.defaultKeyManager.registerKey(this),this._keyRegistered=!0)}},unload:{value:function(){this._isLoaded=!1,u.defaultKeyManager.unregisterKey(this),this._keyRegistered=!1}},addEventListener:{value:function(e,t,n){var s=this.component;r.addEventListener.call(this,e,t,n),(e==i||e==a||e==o)&&(this._shouldDispatchEvent=!0,e==a&&(this._shouldDispatchLongPress=!0),this._isLoaded?this._keyRegistered||(u.defaultKeyManager.registerKey(this),this._keyRegistered=!0):s&&"function"!=typeof s.addComposer&&(this.element||(this.element=window),this.load()))}},constructor:{value:function(){r.constructor.call(this)}},deserializedFromTemplate:{value:function(){var e=this.component;null===this.identifier&&(this.identifier=n.getInfoForObject(this).label),e&&("function"==typeof e.addComposer?e.addComposer(this):this._isLoaded||(this.element||(this.element=window),this.load()))}}},{createKey:{value:function(e,t,n){var r=this;return this===s&&(r=new s),n||(n=e.identifier?e.identifier+t.toLowerCase().replace(/[ +]/g).toCapitalized():t.toLowerCase().replace(/[ +]/g)),r.keys=t,r.identifier=n,e.addComposer(r),r}},createGlobalKey:{value:function(e,t,n){var r=this;return this===s&&(r=new s),r.keys=t,r.identifier=n,e.addComposerForElement(r,window),r}}}),l=null,u=n.specialize({_defaultKeyManager:{value:null},_loadingDefaultKeyManager:{value:!1},_keysToRegister:{value:[]},constructor:{value:function(){}},registerKey:{value:function(t){var n=this;this._defaultKeyManager?this._defaultKeyManager.registerKey(t):(this._keysToRegister.push(t),this._loadingDefaultKeyManager||(this._loadingDefaultKeyManager=!0,e.async("core/event/key-manager").then(function(e){var t=n._defaultKeyManager=e.defaultKeyManager;n._keysToRegister.forEach(function(e){t.registerKey(e)}),n._keysToRegister.length=0}).done()))}},unregisterKey:{value:function(e){this._defaultKeyManager&&this._defaultKeyManager.unregisterKey(e)}}},{defaultKeyManager:{get:function(){return l||(l=new u),this._defaultKeyManager?this._defaultKeyManager:l}}})}}),montageDefine("30dfa63","ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <title>\n        Main\n    </title>\n    <link rel=stylesheet href=main.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"}}},"autocomplete":{"prototype":"matte/ui/autocomplete/autocomplete.reel","properties":{"element":{"#":"autocomplete"},"delegate":{"@":"owner"}}},"button":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"button"},"contenteditable":"true","dir":"ltr","draggable":"true","enabled":true,"formenctype":"application/x-www-form-urlencoded","formmethod":"get","label":"Button","type":"button"},"listeners":[{"type":"action","useCapture":false,"listener":{"@":"owner"}}]},"overlay":{"prototype":"montage/ui/overlay.reel","properties":{"element":{"#":"overlay"}}},"cancelAutocomplete":{"prototype":"montage/composer/key-composer","properties":{"keys":"escape","component":{"@":"owner"},"identifier":"cancelAutocomplete","element":{"@":"autocomplete"}},"listeners":[{"type":"keyPress","listener":{"@":"owner"}}]},"cancel":{"prototype":"montage/composer/key-composer","properties":{"keys":"escape","component":{"@":"owner"},"identifier":"cancel","element":{"@":"owner"}},"listeners":[{"type":"keyPress","listener":{"@":"owner"}}]}}</script>\n</head>\n<body>\n    <div data-montage-id=main data-montage-skin=light class=Main>\n        <button data-montage-id=button></button>\n        <div data-montage-id=overlay class=Overlay>\n            <input data-montage-id=autocomplete>\n        </div>\n    </div>\n\n</body></html>'}),montageDefine("5c7c3da","ui/autocomplete/results-list.reel/results-list.html",{text:'<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=results-list.css>\n    <script type=text/montage-serialization>{"results":{"prototype":"montage/core/range-controller","properties":{"selectAddedObjects":true}},"repetition1":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"repetition1"},"contentController":{"@":"results"},"isSelectionEnabled":true},"bindings":{"contentController":{"<-":"@owner.contentController"},"activeIterations.rangeContent()":{"<-":"iterations.filter{@owner.activeIndexes.has(index)}"}}},"resultItem":{"prototype":"ui/autocomplete/result-item.reel","properties":{"element":{"#":"result-item"}},"bindings":{"textPropertyPath":{"<-":"@owner.textPropertyPath"},"object":{"<-":"@repetition1:iteration.object"}}},"owner":{"prototype":"ui/autocomplete/results-list.reel","properties":{"element":{"#":"results-list"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=results-list class=results-list>\n        <ul class=repetition data-montage-id=repetition1>\n            <li class=result-item data-montage-id=result-item></li>\n        </ul>\n    </div>\n\n\n</body></html>'}),montageDefine("7ba039d","ui/slot.reel/slot",{dependencies:["../../core/core","../component"],factory:function(e,t){var n=(e("../../core/core").Montage,e("../component").Component);t.Slot=n.specialize({hasTemplate:{enumerable:!1,value:!1},constructor:{value:function(){this.super(),this.content=null}},delegate:{value:null},_content:{value:null},enterDocument:{value:function(e){e&&this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t,r;e&&void 0!==e.needsDraw?(r=this._content,r&&void 0!==r.needsDraw&&r.detachFromParentComponent(),e.element?t=e.element:(t=document.createElement("div"),t.id="appendDiv",this.delegate&&"function"==typeof this.delegate.slotElementForComponent&&(t=this.delegate.slotElementForComponent(this,e,t)),e.element=t),Object.getPropertyDescriptor(n,"domContent").set.call(this,t),this.addChildComponent(e),e.needsDraw=!0):Object.getPropertyDescriptor(n,"domContent").set.call(this,e),this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(e,t){this.delegate&&"function"==typeof this.delegate.slotDidSwitchContent&&this.delegate.slotDidSwitchContent(this,e,e?e.component:null,t,t?t.component:null)}}})}}),montageDefine("7ba039d","composer/composer",{dependencies:["../core/core","../core/target"],factory:function(e,t){var n=(e("../core/core").Montage,e("../core/target").Target);t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(){}},_resolveDefaults:{value:function(){null==this.element&&null!=this.component&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),montageDefine("5c7c3da","ui/popup/popup.reel/popup.html",{text:'<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=popup.css>\n    <script type=text/montage-serialization>{"slot1":{"prototype":"montage/ui/slot.reel","properties":{"element":{"#":"popup-content"}}},"owner":{"prototype":"ui/popup/popup.reel","properties":{"element":{"#":"popup-container"},"slot":{"@":"slot1"},"contentEl":{"#":"popup-content"},"containerEl":{"#":"popup-wrapper"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=popup-container class="montage-invisible matte-Popup-container">\n        <div data-montage-id=popup-wrapper class="matte-Popup-tooltip matte-Popup-wrapper matte-Popup-border">\n            <div data-montage-id=popup-content class=matte-Popup-content></div>\n        </div>\n    </div>\n\n\n</body></html>'}),montageDefine("7ba039d","ui/text.reel/text",{dependencies:["../component"],factory:function(e,t){var n=e("../component").Component;t.Text=n.specialize({constructor:{value:function(){this.super()}},hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("ca12d77","package.json",{exports:{name:"native",version:"0.2.0",repository:{type:"git",url:"https://github.com/montagejs/native.git"},dependencies:{montage:"~0.14.0"},devDependencies:{"montage-testing":"~0.4.0"},exclude:["overview.html","overview","run-tests.html","test"],readmeFilename:"README.md",description:"montage-native ==============",bugs:{url:"https://github.com/montagejs/native/issues"},homepage:"https://github.com/montagejs/native",_id:"native@0.2.0",_shasum:"ebff48db731bf63732543be842034251aa7a2f47",_from:"native@~0.2.0",_resolved:"https://registry.npmjs.org/native/-/native-0.2.0.tgz",hash:"ca12d77",mappings:{montage:{name:"montage",hash:"7ba039d",location:"../montage@7ba039d/"}},production:!0,useScriptInjection:!0}}),montageDefine("5c7c3da","package.json",{exports:{name:"matte",version:"0.2.0",repository:{type:"git",url:"https://github.com/montagejs/matte.git"},dependencies:{montage:"~0.14.0","native":"~0.2.0"},devDependencies:{"montage-testing":"~0.4.0"},exclude:["overview.html","overview","run-tests.html","test"],readmeFilename:"README.md",description:"matte ==============",bugs:{url:"https://github.com/montagejs/matte/issues"},homepage:"https://github.com/montagejs/matte",_id:"matte@0.2.0",_from:"matte@0.2.0",hash:"5c7c3da",mappings:{montage:{name:"montage",hash:"7ba039d",location:"../montage@7ba039d/"},"native":{name:"native",hash:"ca12d77",location:"../native@ca12d77/"}},production:!0,useScriptInjection:!0}}),montageDefine("7ba039d","core/browser",{dependencies:["montage"],factory:function(e,t){var n=e("montage").Montage,r=RegExp(/AppleWebKit\/([\d.]+)/),i=n.specialize({constructor:{value:function i(e){this.super(),this._userAgent=e,this._analyze(e)
}},_analyze:{value:function(e){if(e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1){this.android={};var t=r.exec(e),n=null===t?null:parseFloat(r.exec(e)[1]);this.android.androidBrowser=null!==n&&537>n}}},_userAgent:{value:null}}),a=null;n.defineProperties(t,{browser:{get:function(){return null===a&&(a=new i(navigator.userAgent)),a}},Browser:{value:i}})}}),montageDefine("5c7c3da","ui/autocomplete/result-item.reel/result-item",{dependencies:["montage/ui/component","montage/ui/text.reel"],factory:function(e,t){var n=(e("montage/ui/component").Component,e("montage/ui/text.reel").Text);t.ResultItem=n.specialize({textPropertyPath:{value:null},_object:{value:null},object:{get:function(){return this._object},set:function(e){e&&(this._object=e),this._object&&(this.value=this.textPropertyPath?this._object[this.textPropertyPath]:this._object)}}})}}),montageDefine("30dfa63","ui/main.reel/main",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Main=n.specialize({constructor:{value:function(){this.super()}},handleAction:{value:function(){this.templateObjects.overlay.show()}},handleKeyPress:{value:function(e){console.log(e)}},autocompleteShouldGetSuggestions:{value:function(e){e.suggestions=["L'aile ou la cuisse ","La Grande Vadrouille","La belle Américaine"]}}})}}),montageDefine("ca12d77","ui/native-control",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component,r=t.NativeControl=n.specialize({hasTemplate:{value:!1},willPrepareForDraw:{value:function(){}}});r.addAttributes({accesskey:null,contenteditable:null,contextmenu:null,dir:null,draggable:null,dropzone:null,hidden:{dataType:"boolean"},lang:null,spellcheck:null,style:null,tabindex:null,title:null})}}),montageDefine("7ba039d","ui/overlay.reel/overlay.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=overlay.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"overlay"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=overlay class=montage-Overlay>\n        <div data-param=*></div>\n    </div>\n\n\n</body></html>'}),montageDefine("5c7c3da","ui/autocomplete/autocomplete.reel/autocomplete.html",{text:"<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=autocomplete.css>\n    <link rel=stylesheet href=../../input-text.reel/input-text.css>\n</head>\n<body>\n\n\n</body></html>"}),montageDefine("5c7c3da","ui/autocomplete/results-list.reel/results-list",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ResultsList=n.specialize({textPropertyPath:{value:null},contentController:{value:null},activeIndexes:{value:null}})}}),montageDefine("5c7c3da","ui/button.reel/button",{dependencies:["native/ui/button.reel"],factory:function(e,t){var n=e("native/ui/button.reel").Button;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("matte-Button")}}})}}),montageDefine("5c7c3da","ui/button.reel/button.html",{text:"<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n\n\n</body></html>"});
bundleLoaded("index.html.bundle-1-0.js")